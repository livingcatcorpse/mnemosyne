/* Overlay HTML para a esfera selecionada sobre o texto */
.memory-sphere-overlay {
  position: fixed;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999 !important;
  will-change: auto;
  transition: none !important;
  box-shadow: none !important;
  border: 6px solid #f00 !important; /* DEBUG: thick red border */
  outline: 6px solid #0f0 !important; /* DEBUG: green outline */
  background: #ff0 !important; /* DEBUG: bright yellow background */
  opacity: 1 !important;
}
@media (min-width: 641px) {
  .memory-text {
    width: 80vw;
    max-width: 1100px;
    min-width: 180px;
  }
}
@media (max-width: 640px) {
  .memory-text {
      width: 99vw;
      max-width: 99vw;
      min-width: 99vw;
      margin-left: 0;
      white-space: normal;
    max-width: 70vw;
    margin-left: auto;
    margin-right: auto;
    padding-left: 2vw;
    padding-right: 2vw;
    box-sizing: border-box;
  }
}
/* ========================================
   MNEMOSYNE | CSS (estilos principais do website)
   2025/2026
   Autoras: Carolina Machado, Mariana Marinha, Maria Sá, Rita Mendes
   UC: Projeto 4
   Curso: Design de Comunicação, 3º Ano
   Faculdade de Belas Artes da Universidade do Porto
   ========================================
*/

/* RESET CSS E O LAYOUT BASE */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  overflow-y: auto; /* permite scroll vertical */
}

body {
  font-family: 'Montserrat', -apple-system, Roboto, Helvetica, Arial, sans-serif;
  color: #fff;
  background: #000; /* Fundo preto para realçar esferas */
}

/* CANVAS SVG - ESFERAS DE MEMÓRIA */
.canvas {
  /* position: fixed removido para permitir scroll normal */
  inset: 0;
  width: 100vw;
  height: 100vh;
}

#circles-svg {
  width: 100%;
  height: 100%;
  display: block;
  position: relative;
  z-index: 10; /* garantir que o SVG fica atrás do texto e da esfera selecionada */
}

.memory-circle {
  cursor: pointer; /* Indica que as esferas são clicáveis */
  transition: opacity 0.5s ease;
  mix-blend-mode: screen; /* Fusão luminosa ao sobrepor esferas */
  filter: saturate(1.3) brightness(1.15); /* Aumenta vibração e brilho */
}

/* TEXTO DA MEMÓRIA (ao clicar numa esfera) */
 .memory-text {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-height: 60vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding: 32px 2vw;
  font-size: clamp(13px, 1.4vw, 17px);
  font-weight: 600;
  line-height: 1.6;
  letter-spacing: 0.02em;
  text-align: center;
  color: #fff !important;
  background: none !important;
  opacity: 0.35;
  pointer-events: none;
  transition: opacity 0.9s cubic-bezier(.4,0,.2,1);
  z-index: 100 !important;
  text-shadow: none !important;
  filter: none !important;
}

.memory-text::-webkit-scrollbar {
  display: none;
}

 .memory-text.active {
  opacity: 0.5 !important;
  pointer-events: auto;
  cursor: auto;
  color: #fff !important;
  background: none !important;
  text-shadow: none !important;
  filter: none !important;
}

/* FOOTER TRIGGER - Botão "MNEMOSYNE" */
.footer-trigger {
  position: fixed;
  bottom: clamp(10px, 1.6vh, 22px); /* Espaçamento responsivo */
  left: 50%;
  transform: translateX(-50%); /* Centraliza */
  font-size: 18px;
  font-weight: 600;
  letter-spacing: 0.12em;
  opacity: 0.25; /* Subtil por defeito */
  cursor: pointer;
  user-select: none; /* Previne seleção de texto */
  transition: opacity 0.3s ease, transform 0.4s ease;
  z-index: 110;
}
.footer-trigger:hover { opacity: 0.55; }
.footer-trigger:active { transform: translateX(-50%) scale(0.95); }

/* MENU OVERLAY - Painel glass */
.menu-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none; /* Invisível aos cliques quando fechado */
  z-index: 120;
}

.menu-overlay.open {
  pointer-events: auto; /* Ativa interação quando aberto */
}

/* PAINEL CENTRAL com glass effect */
.menu-panel {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 880px;
  height: 560px;
  max-width: 92vw; /* Adapta-se a ecrãs mais pequenos */
  max-height: 85vh;
  /* Glass morphism: fundo translúcido com blur */
  background: rgba(18,18,22,0.18);
  backdrop-filter: blur(30px) saturate(140%) contrast(1.08);
  -webkit-backdrop-filter: blur(30px) saturate(140%) contrast(1.08);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 34px;
  padding: 40px 48px 56px;
  box-shadow: 0 18px 50px -12px rgba(0,0,0,0.62), 0 0 0 1px rgba(255,255,255,0.06);
  transform: translateY(50px) scale(0.96); /* Estado inicial (fechado) */
  opacity: 0;
  transition: transform 0.55s cubic-bezier(.18,.95,.4,1), opacity 0.55s ease;
  position: relative;
  overflow: hidden;
  isolation: isolate; /* Cria contexto de stacking */

  /* Variáveis CSS para parallax do rato */
  --mx: .5; /* Posição X do rato normalizada (0 a 1) */
  --my: .5; /* Posição Y do rato normalizada (0 a 1) */
  --glass-accent: rgba(255,255,255,0.08);
  /* Gradientes internos que reagem ao movimento do rato */
  background-image:
    radial-gradient(circle at calc(var(--mx) * 100%) calc(var(--my) * 100%), rgba(255,255,255,0.24), rgba(255,255,255,0) 40%),
    linear-gradient(140deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04) 70%),
    linear-gradient(210deg, rgba(0,0,0,0.22), rgba(0,0,0,0.38));
  background-blend-mode: overlay, normal, normal;
}
/* Container scrollável do conteúdo (título + texto) */
.menu-content {
  width: 100%;
  max-height: calc(100% - 64px); /* Deixa espaço para as setas */
  overflow-y: auto; /* Permite scroll vertical */
  padding-right: 0;
  scrollbar-width: none; /* Esconde scrollbar no Firefox */
}

/* Esconde scrollbar no WebKit (Chrome, Safari) */
.menu-content::-webkit-scrollbar { display: none; }

/* Camada de brilho/reflexo sobre o painel (glass sheen) */
.menu-panel:before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
    max-width: none;
    padding-left: 0;
    padding-right: 0;
    padding: 32px 2vw;
    background:
      radial-gradient(circle at 20% 22%, rgba(255,255,255,0.32), rgba(255,255,255,0) 55%),
      radial-gradient(circle at 82% 78%, rgba(255,255,255,0.22), rgba(255,255,255,0) 60%);
  mix-blend-mode: overlay;
  pointer-events: none; /* Não interfere com cliques */
  opacity: .44;
}

/* Camada de highlight adicional (topo/fundo) */
.menu-panel:after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(200deg, rgba(255,255,255,0.32) 0%, rgba(255,255,255,0) 42%), linear-gradient(0deg, rgba(255,255,255,0) 78%, rgba(255,255,255,0.26) 100%);
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: .36;
}

/* Estado aberto do painel */
.menu-overlay.open .menu-panel {
  transform: translateY(0) scale(1); /* Transição suave */
  opacity: 1;
}

/* Título do menu com gradient text */
.menu-title {
  margin: 0 0 clamp(28px, 4vw, 48px);
  font-family: 'Montserrat', -apple-system, Roboto, Helvetica, Arial, sans-serif;
  font-size: clamp(22px,3vw,32px);
  font-weight: 600;
  text-align: center;
  letter-spacing: 0.12em;
  /* Gradient de branco clippado ao texto */
  background: linear-gradient(90deg, rgba(255,255,255,0.85), rgba(255,255,255,0.45));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  opacity: 0; /* Estado inicial (animação) */
  transform: translateY(10px);
}

/* Texto do menu: scrollável, centralizado, gradient */
.menu-text {
  margin: 0 auto;
  max-width: 1100px;
  padding: 0 10px;
  font-size: clamp(13px, 1.4vw, 17px); /* Igual à .memory-text */
  line-height: 1.65; /* Espaçamento confortável */
  opacity: 0; /* Estado inicial (animação) */
  text-align: center;
  /* Gradient branco clippado */
  background: linear-gradient(90deg, rgba(255,255,255,0.8), rgba(255,255,255,0.5));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  transform: translateY(10px);
}

/* === Destaque das esferas SVG quando selecionadas === */
/* brilho e saturação elevados para destacar */
.memory-circle.selected {
  filter: brightness(1.25) saturate(180%) contrast(1.1)
          drop-shadow(0 0 14px rgba(255,255,255,0.28))
          drop-shadow(0 0 24px rgba(255,255,255,0.18));
}

/* Só a esfera selecionada e ativa sobrepõe o texto */
.memory-circle.over-text {
  z-index: 2000; /* garantir que a esfera selecionada fica acima do texto */
  position: relative;
  pointer-events: auto;
}

.memory-circle.dim { opacity: 0.22; }

/* Animação do texto: fade in + slide up */
@keyframes textAppear {
  0% { opacity: 0;
    transform: translateY(10px);
  }
  100% { opacity: 0.92;
    transform: translateY(0);
  }
}

/* Trigger animação do título quando menu abre */
.menu-overlay.open .menu-title {
  animation: textAppear 1200ms 200ms cubic-bezier(.18,.95,.4,1) forwards;
}

/* Trigger animação do texto (delay maior) */
.menu-overlay.open .menu-text {
  animation: textAppear 1200ms 320ms cubic-bezier(.18,.95,.4,1) forwards;
}

/* Botão X para fechar o menu */
.menu-close {
  position: absolute;
  top: 18px;
  right: 24px;
  background: none;
  border: 0;
  color: rgba(255,255,255,0.55);
  font-size: 32px;
  line-height: 1;
  cursor: pointer;
  padding: 4px 8px;
  transition: color .25s ease, transform .3s ease;
}

/* Hover: fica branco total */
.menu-close:hover {
  color: #fff;
}

/* Active: scale down */
.menu-close:active {
  transform: scale(.85);
}

/* === SETAS DE NAVEGAÇÃO (V symbols) === */
/* Botão base das setas */
.menu-arrow {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: none;
  border: 0;
  color: rgba(255,255,255,0.6); /* Opacidade reduzida */
  font-size: 16px;
  font-weight: 400; /* Mais finas */
  letter-spacing: 0.12em; /* Juntas */
  line-height: 1;
  cursor: pointer;
  padding: 4px 8px;
  transition: color .25s ease, transform .25s ease;
}

/* Hover: branco total com movimento */
.menu-arrow:hover { color: #fff; transform: translateX(-50%) translateY(-1px); }

/* Active: ligeiro scale */
.menu-arrow:active { transform: translateX(-50%) translateY(1px) scale(0.96); }

/* Posicionamento responsivo esquerda/direita */
.menu-arrow-prev { left: calc(50% - clamp(18px, 2.2vw, 28px)); } /* Seta anterior */
#menu-arrow { left: calc(50% + clamp(18px, 2.2vw, 28px)); } /* Seta seguinte */

/* === MEDIA QUERY: MOBILE (<640px) === */
@media (max-width: 640px) {
  /* Padding reduzido e border-radius */
  .menu-panel {
    padding: 40px 32px 56px;
    border-radius: 32px;
  }
  /* Ajusta posição do botão fechar */
  .menu-close { top: 10px; right: 16px; }
}

/* === MOBILE HINT: mensagem "ABRA NO DESKTOP" === */
.mobile-hint {
  position: fixed;
  inset: 0;
  display: none; /* Só aparece em mobile */
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 24px;
  z-index: 130;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  font-family: 'Montserrat', -apple-system, Roboto, Helvetica, Arial, sans-serif;
  letter-spacing: 0.12em;
  font-weight: 600;
  font-size: clamp(14px, 2.6vw, 18px);
  /* Gradient clippado ao texto */
  background: linear-gradient(90deg, rgba(255,255,255,0.85), rgba(255,255,255,0.5));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  opacity: 1;
  transition: opacity 1.6s ease; /* Fade longo */
}

/* Classe hide para fade out */
.mobile-hint.hide { opacity: 0; }

/* Só mostra em mobile */
@media (max-width: 640px) {
  .mobile-hint { display: flex; }
}

/* === MEDIA QUERY: DESKTOP PEQUENO (<1024px) === */
@media (max-width: 1024px) {
  /* Padding reduzido no painel */
  .menu-panel {
    padding: 32px 32px 56px;
  }
  /* Título com margem menor */
  .menu-title {
    margin-bottom: clamp(24px, 3.2vw, 40px);
  }
  /* Texto ajustado */
  .menu-text {
    max-width: clamp(500px, 52vw, 680px);
    line-height: 1.6;
    padding: 0 8px;
  }
  /* Setas afastadas do conteúdo */
  .menu-arrow { bottom: 18px; }
}
